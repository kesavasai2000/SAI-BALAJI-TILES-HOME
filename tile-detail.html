<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tile Detail - Tiles Shop</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <style>
        .thumbnail-active {
            border-color: #22d3ee; /* Tailwind's cyan-400 */
            box-shadow: 0 0 0 2px #22d3ee;
        }
        .modal-overlay {
            transition: opacity 0.3s ease-in-out;
        }
        .modal-content {
            transition: transform 0.3s ease-in-out;
        }
    </style>
</head>
<body class="bg-black text-gray-200 font-poppins">
     <style>
        /* --- Global Background Animations --- */
        body {
            background: linear-gradient(270deg, #0d0320, #1a094b, #4a00e0, #8e2de2, #22d3ee);
            background-size: 300% 300%;
            animation: gradientBG 20s ease infinite;
        }
        @keyframes gradientBG {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        .stars-container {
            position: fixed; 
            top: 0; left: 0; width: 100vw; height: 100vh;
            pointer-events: none; overflow: hidden; z-index: -1; 
        }
        .star {
            position: absolute; background-color: rgba(255, 255, 255, 0.7);
            border-radius: 50%; animation: twinkle 6s infinite ease-in-out;
        }
        .star:nth-child(5n+1) { animation-delay: 0s; }
        .star:nth-child(5n+2) { animation-delay: -1.2s; }
        .star:nth-child(5n+3) { animation-delay: -2.4s; }
        .star:nth-child(5n+4) { animation-delay: -3.6s; }
        .star:nth-child(5n+5) { animation-delay: -4.8s; }
        @keyframes twinkle {
            0%, 100% { opacity: 0.1; transform: scale(0.6); }
            50% { opacity: 0.7; transform: scale(1); }
        }

        /* --- Page-Specific Animations & Styles --- */
        .thumbnail-active {
            border-color: #22d3ee; /* Tailwind's cyan-400 */
            box-shadow: 0 0 0 2px #22d3ee;
        }
        .modal-overlay { transition: opacity 0.3s ease-in-out; }
        .modal-content { transition: transform 0.3s ease-in-out; }

        /* General Navbar & Splash (if needed on other pages, though splash is index-specific) */
        .navbar.translate-x-0 { transform: translateX(0%); }
        .navbar.-translate-x-full { transform: translateX(-100%); }
         @keyframes fadeInSlow { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        .animate-fade-in-slow { animation: fadeInSlow 1.5s ease-out forwards; } /* For splash on index */
         @keyframes slideUp { from { opacity: 0; transform: translateY(40px); } to { opacity: 1; transform: translateY(0); } }
        .animate-slide-up { animation: slideUp 1s ease-out forwards; } /* For section titles */

    </style>
</head>
<body class="text-gray-200 font-poppins">

    <!-- Animated Star Background - Global -->
    <div class="stars-container fixed inset-0 z-[-1] pointer-events-none" id="stars-bg-global">
        <!-- Stars will be injected here by JavaScript -->
    </div>
    <!-- Header -->
    <header id="main-header" class="fixed w-full bg-gray-900/80 backdrop-blur-md shadow-2xl flex items-center justify-between p-3 sm:p-4 z-40 border-b border-cyan-500/30">
        <div class="flex-none">
            <button id="toggle-btn-detail" aria-label="Toggle menu" aria-expanded="false" aria-controls="main-navbar-detail" class="text-xl sm:text-2xl text-cyan-400 hover:text-cyan-300 transition-colors duration-300 focus:outline-none focus:ring-2 focus:ring-cyan-300 rounded" onclick="toggleMenuDetail()">☰</button>
        </div>
        <div class="flex-grow text-center px-2">
             <a href="index.html" class="text-base sm:text-lg md:text-xl lg:text-2xl font-bold text-cyan-400 truncate hover:text-cyan-300">SAI BALAJI TILES HOME</a>
        </div>
        <div class="flex-none w-6 sm:w-8 h-6 sm:h-8"></div>
    </header>

    <!-- Navigation -->
    <nav id="main-navbar-detail" class="navbar fixed top-0 left-0 w-64 sm:w-72 h-screen bg-gray-900/80 backdrop-blur-md shadow-lg transform -translate-x-full transition-transform duration-300 z-30 border-r border-cyan-500/30" role="navigation" aria-label="Main navigation">
        <ul class="nav-menu mt-16 sm:mt-20 space-y-3 sm:space-y-4 p-4">
            <li><a href="index.html#home" class="block py-2 px-2 text-indigo-300 hover:text-indigo-200 hover:bg-gray-800/60 rounded transition-colors duration-300 text-sm sm:text-base">Home</a></li>
            <li><a href="index.html#catalog" class="block py-2 px-2 text-indigo-300 hover:text-indigo-200 hover:bg-gray-800/60 rounded transition-colors duration-300 text-sm sm:text-base">Catalog</a></li>
            <li><a href="index.html#about" class="block py-2 px-2 text-indigo-300 hover:text-indigo-200 hover:bg-gray-800/60 rounded transition-colors duration-300 text-sm sm:text-base">About Us</a></li>
            <li><a href="index.html#collections" class="block py-2 px-2 text-indigo-300 hover:text-indigo-200 hover:bg-gray-800/60 rounded transition-colors duration-300 text-sm sm:text-base">Collections</a></li>
            <li><a href="index.html#contact" class="block py-2 px-2 text-indigo-300 hover:text-indigo-200 hover:bg-gray-800/60 rounded transition-colors duration-300 text-sm sm:text-base">Contact</a></li>
            <li><a href="cart.html" class="block py-2 px-2 text-indigo-300 hover:text-indigo-200 hover:bg-gray-800/60 rounded transition-colors duration-300 text-sm sm:text-base">Cart (<span id="cart-count-detail">0</span>)</a></li>
        </ul>
    </nav>

    <!-- Tile Detail -->
    <section class="tile-detail py-20 sm:py-24 bg-gray-900/70 backdrop-blur-sm min-h-screen">
        <div class="container mx-auto px-4 text-center">
            <h2 id="detail-title" class="text-2xl sm:text-3xl md:text-4xl font-bold mb-6 sm:mb-8 text-cyan-400">Tile Details</h2>
            
            <div class="main-image-container mb-4 sm:mb-6">
                <img id="detail-image" src="images/placeholder.jpg" alt="Main Tile Image" class="w-full max-w-sm sm:max-w-md md:max-w-lg lg:max-w-xl mx-auto rounded-lg shadow-2xl object-cover h-64 sm:h-80 md:h-96 border-2 border-gray-700">
            </div>
            <div id="related-images-list" class="flex justify-center gap-2 sm:gap-3 flex-wrap mb-8 sm:mb-10">
                <!-- Thumbnails will be populated by JavaScript -->
            </div>

            <div class="tile-description mb-8 sm:mb-10">
                <p id="detail-description" class="text-base sm:text-lg text-gray-300 max-w-xl sm:max-w-2xl mx-auto leading-relaxed">
                    Loading tile description...
                </p>
            </div>
            
            <div class="flex flex-col sm:flex-row justify-center items-center gap-4">
                <button id="add-to-cart-btn" 
                        class="bg-indigo-500 text-white px-6 py-3 sm:px-8 rounded-lg shadow-lg 
                               text-base sm:text-lg font-semibold w-full sm:w-auto
                               transition-all duration-300 ease-in-out 
                               transform hover:bg-indigo-600 hover:shadow-xl hover:-translate-y-1 hover:scale-105 
                               focus:outline-none focus:ring-4 focus:ring-indigo-300 focus:ring-opacity-75 
                               active:bg-indigo-700 active:scale-95">
                    <span class="button-text">Add to Cart</span>
                    <span class="button-loader hidden">Adding...</span>
                </button>
                <button id="view-in-room-btn" 
                        class="bg-indigo-500 text-white px-6 py-3 sm:px-8 rounded-lg shadow-lg 
                               text-base sm:text-lg font-semibold w-full sm:w-auto
                               transition-all duration-300 ease-in-out 
                               transform hover:bg-indigo-600 hover:shadow-xl hover:-translate-y-1 hover:scale-105 
                               focus:outline-none focus:ring-4 focus:ring-indigo-300 focus:ring-opacity-75 
                               active:bg-indigo-700 active:scale-95">
                    View in Room (AR)
                </button>
            </div>
            <div id="cart-feedback" class="mt-4 font-semibold text-sm sm:text-base"></div>
        </div>
    </section>

    <!-- AR Modal Placeholder -->
    <div id="ar-modal" class="fixed inset-0 bg-black bg-opacity-70 modal-overlay flex items-center justify-center p-4 z-50 hidden opacity-0" role="dialog" aria-modal="true" aria-labelledby="ar-modal-title">
        <div class="bg-gray-800 p-6 sm:p-8 rounded-lg shadow-2xl w-full max-w-md modal-content transform scale-95">
            <div class="flex justify-between items-center mb-4">
                <h3 id="ar-modal-title" class="text-xl sm:text-2xl font-bold text-cyan-400">View in Room (AR)</h3>
                <button id="close-ar-modal-btn" aria-label="Close AR modal" class="text-gray-400 hover:text-gray-200 text-2xl">×</button>
            </div>
            <p class="text-gray-300 text-base sm:text-lg">
                Our Augmented Reality "View in Room" feature is coming soon! This will allow you to visualize how our beautiful tiles will look in your own space directly through your device's camera.
            </p>
            <p class="text-gray-400 text-sm mt-4">Stay tuned for updates!</p>
        </div>
    </div>

    <footer class="bg-gray-900 text-gray-400 text-center py-6 border-t border-cyan-500/30">
        <p class="text-sm sm:text-base">© 2025 Sai Balaji Tiles Home. All Rights Reserved.</p>
    </footer>

    <script>
        // --- Menu Toggle for Detail Page ---
        let menuDetailVisible = false;
        const navbarDetail = document.getElementById("main-navbar-detail");
        const toggleBtnDetail = document.getElementById("toggle-btn-detail");

        function toggleMenuDetail() {
            menuDetailVisible = !menuDetailVisible;
            if (navbarDetail) {
                navbarDetail.classList.toggle("translate-x-0", menuDetailVisible);
                navbarDetail.classList.toggle("-translate-x-full", !menuDetailVisible);
            }
            if (toggleBtnDetail) {
                toggleBtnDetail.classList.toggle("text-cyan-600", menuDetailVisible);
                toggleBtnDetail.setAttribute('aria-expanded', menuDetailVisible);
            }
        }
        document.addEventListener("click", (e) => {
            if (menuDetailVisible && navbarDetail && toggleBtnDetail) {
                 if (!navbarDetail.contains(e.target) && e.target !== toggleBtnDetail && !toggleBtnDetail.contains(e.target)) {
                    toggleMenuDetail();
                }
            }
        });
        document.addEventListener('keydown', function(event) {
            if (event.key === 'Escape' && menuDetailVisible) {
                toggleMenuDetail();
            }
        });

        // --- Tile Data and Detail Page Logic ---
        const tilesData = {
            polished: { title: "Polished Vitrified Tiles", main: "images/tiles1.jpg", description: "Elegant and durable...", related: ["images/tiles1.jpg", "images/tile1.jpg", "images/tiles3.jpg", "images/tile2.jpg"] },
            ceramic: { title: "Ceramic Tiles", main: "images/tiles2.jpg", description: "Versatile and affordable...", related: ["images/tile2.jpg", "images/tile1.jpg", "images/tiles1.jpg"] },
            glazed: { title: "Glazed Vitrified Tiles (GVT)", main: "images/tiles3.jpg", description: "High-quality GVT...", related: ["images/tiles3.jpg", "images/tiles3.jpg", "images/tiles2.jpg", "images/tiles1.jpg"] }
        };

        const urlParams = new URLSearchParams(window.location.search);
        const tileId = urlParams.get('id');
        const selectedTile = tilesData[tileId];

        const detailTitleEl = document.getElementById("detail-title");
        const detailImageEl = document.getElementById("detail-image");
        const detailDescriptionEl = document.getElementById("detail-description");
        const relatedImagesListEl = document.getElementById("related-images-list");
        const addToCartButtonEl = document.getElementById("add-to-cart-btn");
        const cartFeedbackEl = document.getElementById("cart-feedback");

        function updateMainImage(src, altText, clickedThumbnail) {
            if (detailImageEl) {
                detailImageEl.src = src;
                detailImageEl.alt = altText;
            }
            document.querySelectorAll('#related-images-list img').forEach(img => {
                img.classList.remove('thumbnail-active');
                img.setAttribute('aria-current', 'false');
            });
            if (clickedThumbnail) {
                clickedThumbnail.classList.add('thumbnail-active');
                clickedThumbnail.setAttribute('aria-current', 'true');
            }
        }

        if (selectedTile) {
            if (detailTitleEl) detailTitleEl.textContent = selectedTile.title;
            if (detailDescriptionEl) detailDescriptionEl.textContent = selectedTile.description;
            updateMainImage(selectedTile.main, selectedTile.title + " - Main View");

            if (relatedImagesListEl) {
                relatedImagesListEl.innerHTML = ''; 
                const allImagesForGallery = [selectedTile.main, ...selectedTile.related.filter(img => img !== selectedTile.main)];
                allImagesForGallery.forEach((src, index) => {
                    const img = document.createElement("img");
                    img.src = src;
                    const alt = `${selectedTile.title} - View ${index + 1}`;
                    img.alt = alt;
                    img.className = "w-16 h-16 sm:w-20 sm:h-20 md:w-24 md:h-24 object-cover rounded-md shadow-sm hover:shadow-md transition-all duration-300 cursor-pointer border-2 border-gray-700 hover:border-cyan-400 transform hover:scale-105";
                    img.setAttribute('role', 'button');
                    img.setAttribute('tabindex', '0');
                    if (src === selectedTile.main) {
                        img.classList.add('thumbnail-active');
                        img.setAttribute('aria-current', 'true');
                    } else {
                         img.setAttribute('aria-current', 'false');
                    }
                    img.onclick = () => updateMainImage(src, alt, img);
                    img.onkeydown = (e) => { if (e.key === 'Enter' || e.key === ' ') { e.preventDefault(); updateMainImage(src, alt, img); }};
                    relatedImagesListEl.appendChild(img);
                });
            }

            if (addToCartButtonEl) {
                const buttonText = addToCartButtonEl.querySelector('.button-text');
                const buttonLoader = addToCartButtonEl.querySelector('.button-loader');
                addToCartButtonEl.onclick = function() {
                    if (buttonLoader) buttonText.classList.add('hidden');
                    if (buttonLoader) buttonLoader.classList.remove('hidden');
                    addToCartButtonEl.disabled = true;
                    setTimeout(() => { 
                        let cart = JSON.parse(localStorage.getItem("cart")) || [];
                        const existingItem = cart.find(item => item.id === tileId);
                        if (cartFeedbackEl) cartFeedbackEl.textContent = ''; 
                        cartFeedbackEl.className = 'mt-4 font-semibold text-sm sm:text-base';
                        if (existingItem) {
                             if(cartFeedbackEl) {
                                cartFeedbackEl.textContent = `${selectedTile.title} is already in your cart.`;
                                cartFeedbackEl.classList.add('text-yellow-400');
                             }
                        } else {
                            cart.push({ id: tileId, name: selectedTile.title, image: selectedTile.main });
                            localStorage.setItem("cart", JSON.stringify(cart));
                            if(cartFeedbackEl) {
                                cartFeedbackEl.textContent = `${selectedTile.title} added to cart!`;
                                cartFeedbackEl.classList.add('text-green-400');
                            }
                        }
                        updateCartCountDetail();
                        if (buttonLoader) buttonText.classList.remove('hidden');
                        if (buttonLoader) buttonLoader.classList.add('hidden');
                        addToCartButtonEl.disabled = false;
                        setTimeout(() => { if(cartFeedbackEl) cartFeedbackEl.textContent = ''; }, 3000);
                    }, 700); 
                };
            }
        } else { 
            if (detailTitleEl) detailTitleEl.textContent = "Tile Not Found";
            if (detailImageEl) detailImageEl.src = "images/placeholder-notfound.jpg";
            if (detailDescriptionEl) detailDescriptionEl.textContent = "The tile you are looking for could not be found. Please check the catalog.";
            if (addToCartButtonEl) addToCartButtonEl.disabled = true;
            const viewInRoomBtnEl = document.getElementById('view-in-room-btn');
            if(viewInRoomBtnEl) viewInRoomBtnEl.disabled = true;
        }

        function updateCartCountDetail() {
            const cart = JSON.parse(localStorage.getItem("cart")) || [];
            const cartCountSpan = document.getElementById("cart-count-detail");
             if (cartCountSpan) cartCountSpan.textContent = cart.length;
        }
        updateCartCountDetail();

        const arModal = document.getElementById('ar-modal');
        const viewInRoomBtn = document.getElementById('view-in-room-btn');
        const closeArModalBtn = document.getElementById('close-ar-modal-btn');
        function openArModal() {
            if (arModal) {
                arModal.classList.remove('hidden');
                setTimeout(() => arModal.classList.add('opacity-100'), 10); 
                setTimeout(() => arModal.querySelector('.modal-content').classList.add('scale-100'), 10);
                if(closeArModalBtn) closeArModalBtn.focus();
            }
        }
        function closeArModal() {
            if (arModal) {
                arModal.classList.remove('opacity-100');
                arModal.querySelector('.modal-content').classList.remove('scale-100');
                setTimeout(() => arModal.classList.add('hidden'), 300); 
                if(viewInRoomBtn) viewInRoomBtn.focus(); 
            }
        }
        if (viewInRoomBtn) viewInRoomBtn.addEventListener('click', openArModal);
        if (closeArModalBtn) closeArModalBtn.addEventListener('click', closeArModal);
        if (arModal) {
            arModal.addEventListener('click', (event) => { 
                if (event.target === arModal) closeArModal();
            });
        }
        document.addEventListener('keydown', (event) => { 
            if (event.key === 'Escape' && arModal && !arModal.classList.contains('hidden')) {
                closeArModal();
            }
        });
    </script>
</body>
</html>
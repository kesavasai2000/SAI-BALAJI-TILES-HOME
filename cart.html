<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Your Cart - Tiles Shop</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body class="bg-black text-gray-200 font-poppins">
     <style>
        /* --- Global Background Animations --- */
        body {
            background: linear-gradient(270deg, #0d0320, #1a094b, #4a00e0, #8e2de2, #22d3ee);
            background-size: 300% 300%;
            animation: gradientBG 20s ease infinite;
        }
        @keyframes gradientBG {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        .stars-container {
            position: fixed; 
            top: 0; left: 0; width: 100vw; height: 100vh;
            pointer-events: none; overflow: hidden; z-index: -1; 
        }
        .star {
            position: absolute; background-color: rgba(255, 255, 255, 0.7);
            border-radius: 50%; animation: twinkle 6s infinite ease-in-out;
        }
        .star:nth-child(5n+1) { animation-delay: 0s; }
        .star:nth-child(5n+2) { animation-delay: -1.2s; }
        .star:nth-child(5n+3) { animation-delay: -2.4s; }
        .star:nth-child(5n+4) { animation-delay: -3.6s; }
        .star:nth-child(5n+5) { animation-delay: -4.8s; }
        @keyframes twinkle {
            0%, 100% { opacity: 0.1; transform: scale(0.6); }
            50% { opacity: 0.7; transform: scale(1); }
        }

        /* --- Page-Specific Animations & Styles --- */
        .thumbnail-active {
            border-color: #22d3ee; /* Tailwind's cyan-400 */
            box-shadow: 0 0 0 2px #22d3ee;
        }
        .modal-overlay { transition: opacity 0.3s ease-in-out; }
        .modal-content { transition: transform 0.3s ease-in-out; }

        /* General Navbar & Splash (if needed on other pages, though splash is index-specific) */
        .navbar.translate-x-0 { transform: translateX(0%); }
        .navbar.-translate-x-full { transform: translateX(-100%); }
         @keyframes fadeInSlow { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        .animate-fade-in-slow { animation: fadeInSlow 1.5s ease-out forwards; } /* For splash on index */
         @keyframes slideUp { from { opacity: 0; transform: translateY(40px); } to { opacity: 1; transform: translateY(0); } }
        .animate-slide-up { animation: slideUp 1s ease-out forwards; } /* For section titles */

    </style>
</head>
<body class="text-gray-200 font-poppins">

    <!-- Animated Star Background - Global -->
    <div class="stars-container fixed inset-0 z-[-1] pointer-events-none" id="stars-bg-global">
        <!-- Stars will be injected here by JavaScript -->
    </div>
    <!-- Header -->
    <header id="main-header" class="fixed w-full bg-gray-900/80 backdrop-blur-md shadow-2xl flex items-center justify-between p-3 sm:p-4 z-40 border-b border-cyan-500/30">
        <div class="flex-none">
            <button id="toggle-btn-cart" aria-label="Toggle menu" aria-expanded="false" aria-controls="main-navbar-cart" class="text-xl sm:text-2xl text-cyan-400 hover:text-cyan-300 transition-colors duration-300 focus:outline-none focus:ring-2 focus:ring-cyan-300 rounded" onclick="toggleMenuCart()">☰</button>
        </div>
        <div class="flex-grow text-center px-2">
            <a href="index.html" class="text-base sm:text-lg md:text-xl lg:text-2xl font-bold text-cyan-400 truncate hover:text-cyan-300">SAI BALAJI TILES HOME</a>
        </div>
        <div class="flex-none w-6 sm:w-8 h-6 sm:h-8"></div>
    </header>

    <!-- Navigation -->
    <nav id="main-navbar-cart" class="navbar fixed top-0 left-0 w-64 sm:w-72 h-screen bg-gray-900/80 backdrop-blur-md shadow-lg transform -translate-x-full transition-transform duration-300 z-30 border-r border-cyan-500/30" role="navigation" aria-label="Main navigation">
        <ul class="nav-menu mt-16 sm:mt-20 space-y-3 sm:space-y-4 p-4">
            <li><a href="index.html#home" class="block py-2 px-2 text-indigo-300 hover:text-indigo-200 hover:bg-gray-800/60 rounded transition-colors duration-300 text-sm sm:text-base">Home</a></li>
            <li><a href="index.html#catalog" class="block py-2 px-2 text-indigo-300 hover:text-indigo-200 hover:bg-gray-800/60 rounded transition-colors duration-300 text-sm sm:text-base">Catalog</a></li>
            <li><a href="index.html#about" class="block py-2 px-2 text-indigo-300 hover:text-indigo-200 hover:bg-gray-800/60 rounded transition-colors duration-300 text-sm sm:text-base">About Us</a></li>
            <li><a href="index.html#collections" class="block py-2 px-2 text-indigo-300 hover:text-indigo-200 hover:bg-gray-800/60 rounded transition-colors duration-300 text-sm sm:text-base">Collections</a></li>
            <li><a href="index.html#contact" class="block py-2 px-2 text-indigo-300 hover:text-indigo-200 hover:bg-gray-800/60 rounded transition-colors duration-300 text-sm sm:text-base">Contact</a></li>
            <li><a href="cart.html" class="block py-2 px-2 text-indigo-300 hover:text-indigo-200 hover:bg-gray-800/60 rounded transition-colors duration-300 text-sm sm:text-base">Cart (<span id="cart-count-cart">0</span>)</a></li>
        </ul>
    </nav>

    <!-- Cart Section -->
    <section class="cart py-20 sm:py-24 bg-gray-900/70 backdrop-blur-sm min-h-screen">
        <div class="container mx-auto px-4 text-center">
            <h2 class="text-2xl sm:text-3xl md:text-4xl font-bold mb-8 text-cyan-400">Your Shopping Cart</h2>
            <div id="cart-items-container" class="space-y-4 sm:space-y-6 mb-8 sm:mb-10 max-w-xl md:max-w-2xl mx-auto">
                <!-- Cart items will be populated by JavaScript -->
            </div>
            <div id="cart-empty-message" class="hidden text-lg sm:text-xl text-indigo-300 mb-8">
                Your cart is currently empty. <a href="index.html#catalog" class="font-semibold hover:text-cyan-400 underline">Browse our catalog!</a>
            </div>
            <button id="checkout-btn" 
        class="bg-indigo-500 text-white px-6 py-3 sm:px-8 rounded-lg shadow-lg 
                               text-base sm:text-lg font-semibold w-full sm:w-auto
                               transition-all duration-300 ease-in-out 
                               transform hover:bg-indigo-600 hover:shadow-xl hover:-translate-y-1 hover:scale-105 
                               focus:outline-none focus:ring-4 focus:ring-indigo-300 focus:ring-opacity-75 
                               active:bg-indigo-700 active:scale-95">
     <span class="button-text">Proceed to Checkout</span>
     <span class="button-loader hidden">Processing...</span>
</button>
            <div id="checkout-status" class="mt-4 text-sm sm:text-base"></div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-gray-900 text-gray-400 text-center py-6 border-t border-cyan-500/30">
        <p class="text-sm sm:text-base">© 2025 Sai Balaji Tiles Home. All Rights Reserved.</p>
    </footer>

    <!-- Scripts -->
    <script>
        // --- Menu Toggle for Cart Page ---
        let menuCartVisible = false;
        const navbarCart = document.getElementById("main-navbar-cart");
        const toggleBtnCart = document.getElementById("toggle-btn-cart");

        function toggleMenuCart() {
            menuCartVisible = !menuCartVisible;
            if (navbarCart) {
                navbarCart.classList.toggle("translate-x-0", menuCartVisible);
                navbarCart.classList.toggle("-translate-x-full", !menuCartVisible);
            }
            if (toggleBtnCart) {
                 toggleBtnCart.classList.toggle("text-cyan-600", menuCartVisible);
                 toggleBtnCart.setAttribute('aria-expanded', menuCartVisible);
            }
        }
        document.addEventListener("click", (e) => {
             if (menuCartVisible && navbarCart && toggleBtnCart) {
                 if (!navbarCart.contains(e.target) && e.target !== toggleBtnCart && !toggleBtnCart.contains(e.target) ) {
                    toggleMenuCart();
                }
            }
        });
         document.addEventListener('keydown', function(event) {
            if (event.key === 'Escape' && menuCartVisible) {
                toggleMenuCart();
            }
        });

        // --- Cart Management Logic ---
        const cartItemsContainer = document.getElementById("cart-items-container");
        const cartEmptyMessage = document.getElementById("cart-empty-message");
        const checkoutButton = document.getElementById("checkout-btn");
        const checkoutStatusEl = document.getElementById("checkout-status");

        function updateCartDisplay() {
            const cart = JSON.parse(localStorage.getItem("cart")) || [];
            if (cartItemsContainer) cartItemsContainer.innerHTML = ""; 
            if (cart.length === 0) {
                if (cartEmptyMessage) cartEmptyMessage.classList.remove("hidden");
                if (cartItemsContainer) cartItemsContainer.classList.add("hidden");
                if (checkoutButton) checkoutButton.disabled = true;
            } else {
                if (cartEmptyMessage) cartEmptyMessage.classList.add("hidden");
                if (cartItemsContainer) cartItemsContainer.classList.remove("hidden");
                if (checkoutButton) checkoutButton.disabled = false;
                cart.forEach((item, index) => {
                    const div = document.createElement("div");
                    div.className = "cart-item flex flex-col sm:flex-row items-center justify-between bg-gray-800/70 rounded-lg shadow-lg p-3 sm:p-4 transition-shadow duration-300 hover:shadow-xl gap-3 sm:gap-4 border border-gray-700 hover:border-cyan-500/50";
                    div.innerHTML = `
                        <img src="${item.image || 'images/placeholder.jpg'}" alt="${item.name || 'Tile image'}" class="w-20 h-20 sm:w-24 sm:h-24 object-cover rounded-md border-2 border-gray-600">
                        <span class="flex-1 text-base sm:text-lg text-indigo-300 text-center sm:text-left">${item.name || 'Unknown Tile'}</span>
                        <button class="remove-btn bg-red-600 text-white px-3 py-1.5 sm:px-4 sm:py-2 rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-400 focus:ring-opacity-50 transition-all duration-300 ease-in-out transform hover:scale-105 text-xs sm:text-sm font-semibold" onclick="removeFromCart(${index})" aria-label="Remove ${item.name || 'tile'} from cart">Remove</button>
                    `;
                    if (cartItemsContainer) cartItemsContainer.appendChild(div);
                });
            }
            updateCartCountCart();
        }

        function removeFromCart(index) {
            let cart = JSON.parse(localStorage.getItem("cart")) || [];
            cart.splice(index, 1);
            localStorage.setItem("cart", JSON.stringify(cart));
            updateCartDisplay();
        }

        function updateCartCountCart() {
            const cart = JSON.parse(localStorage.getItem("cart")) || [];
            const cartCountSpan = document.getElementById("cart-count-cart");
            if (cartCountSpan) cartCountSpan.textContent = cart.length;
        }
        
        if(checkoutButton) {
            const buttonText = checkoutButton.querySelector('.button-text');
            const buttonLoader = checkoutButton.querySelector('.button-loader');
            checkoutButton.addEventListener('click', () => {
                const cart = JSON.parse(localStorage.getItem("cart")) || [];
                if (cart.length > 0) {
                    if(buttonLoader) buttonText.classList.add('hidden');
                    if(buttonLoader) buttonLoader.classList.remove('hidden');
                    checkoutButton.disabled = true;
                    if(checkoutStatusEl) checkoutStatusEl.textContent = '';
                    setTimeout(() => { 
                        if(checkoutStatusEl) {
                            checkoutStatusEl.textContent = 'Checkout successful! (This is a demo)';
                            checkoutStatusEl.className = 'mt-4 text-sm sm:text-base text-green-400';
                        }
                        if(buttonLoader) buttonText.classList.remove('hidden');
                        if(buttonLoader) buttonLoader.classList.add('hidden');
                        setTimeout(() => {if(checkoutStatusEl) checkoutStatusEl.textContent = '';}, 4000);
                    }, 1500);
                } else {
                     if(checkoutStatusEl) {
                        checkoutStatusEl.textContent = 'Your cart is empty. Please add items to proceed.';
                        checkoutStatusEl.className = 'mt-4 text-sm sm:text-base text-red-400';
                        setTimeout(() => {if(checkoutStatusEl) checkoutStatusEl.textContent = '';}, 3000);
                     }
                }
            });
        }
        updateCartDisplay();
    </script>
</body>
</html>